# ============================================
# Clawdbot ä¸»é…ç½®æ–‡ä»¶
# Bot: @cyberoracle_clawd_ai_bot
# åŸŸå: clawdbot.cyberoracle.net
# ============================================

# --------------------------------------------
# Gateway é…ç½®
# --------------------------------------------
gateway:
  mode: "local"

# --------------------------------------------
# Agent é…ç½® (å¤šç”¨æˆ·ç‹¬ç«‹è®°å¿†)
# --------------------------------------------
agents:
  # å…±äº«é»˜è®¤é…ç½® (å„ agent ç»§æ‰¿)
  defaults:
    model:
      primary: "minimax/MiniMax-M2.1"
      fallbacks:
        - "gemini-3-flash-preview"
        - "deepseek/deepseek-chat"

    models:
      "minimax/MiniMax-M2.1":
        alias: "minimax"
      "google/gemini-3-flash-preview":
        alias: "gemini"
      "google/gemini-3-pro-preview":
        alias: "gemini-pro"
      "deepseek/deepseek-chat":
        alias: "deepseek"
      "anthropic/claude-sonnet-4-5":
        alias: "claude"
      "anthropic/claude-opus-4-5":
        alias: "opus"
      "openai/gpt-5":
        alias: "gpt"

  # æ¯ç”¨æˆ·ç‹¬ç«‹ agent
  list:
    - id: "user1"
      name: "User1"
      workspace: "~/clawd-user1"
      default: true

    - id: "user2"
      name: "User2"
      workspace: "~/clawd-user2"

    - id: "user3"
      name: "Jing"
      workspace: "~/clawd-user3"

# --------------------------------------------
# è·¯ç”±ç»‘å®š (TG User ID â†’ Agent)
# --------------------------------------------
bindings:
  - agentId: "user1"
    match:
      channel: "telegram"
      peer:
        kind: "dm"
        id: "6309937609"
  - agentId: "user2"
    match:
      channel: "telegram"
      peer:
        kind: "dm"
        id: "8412468762"
  - agentId: "user3"
    match:
      channel: "telegram"
      peer:
        kind: "dm"
        id: "7121639624"

# --------------------------------------------
# æ¨¡å‹ Provider é…ç½®
# --------------------------------------------
models:
  mode: "merge"
  providers:
    minimax:
      baseUrl: "https://api.minimax.io/anthropic"
      apiKey: "${MINIMAX_API_KEY}"
      api: "anthropic-messages"
      models:
        - id: "MiniMax-M2.1"
          name: "MiniMax M2.1"
          contextWindow: 200000
          maxTokens: 8192
          cost:
            input: 15
            output: 60

    deepseek:
      baseUrl: "https://api.deepseek.com/v1"
      apiKey: "${DEEPSEEK_API_KEY}"
      api: "openai-completions"
      models:
        - id: "deepseek-chat"
          name: "DeepSeek V3"
          contextWindow: 64000
          maxTokens: 8192
          cost:
            input: 0.27
            output: 1.10

    google:
      apiKey: "${GOOGLE_API_KEY}"

    anthropic:
      apiKey: "${ANTHROPIC_API_KEY}"

    openai:
      apiKey: "${OPENAI_API_KEY}"

# --------------------------------------------
# Telegram é…ç½®
# --------------------------------------------
channels:
  telegram:
    enabled: true
    botToken: "${TELEGRAM_BOT_TOKEN}"
    dmPolicy: "allowlist"
    allowFrom:
      - "6309937609"
      - "8412468762"
      - "7121639624"
    groupPolicy: "disabled"

# --------------------------------------------
# å‘½ä»¤é…ç½®
# --------------------------------------------
commands:
  native: "auto"
  text: true

# --------------------------------------------
# Webhook / Gmail é…ç½®
# --------------------------------------------
hooks:
  enabled: true
  token: "${OPENCLAW_HOOK_TOKEN}"
  path: "/hooks"
  presets: ["gmail"]

  gmail:
    account: "${GMAIL_ACCOUNT}" # klchen0113@gmail.com
    model: "google/gemini-2.0-flash"
    thinking: "off"
    topic: "gog-gmail-watch"
    subscription: "gog-gmail-watch-push"
    pushToken: "gmail-push-token-clawdbot-2026"
    hookUrl: "http://127.0.0.1:18789/hooks/gmail"
    serve:
      bind: "127.0.0.1"
      port: 8788
      path: "/gmail-pubsub"

  mappings:
    # Kyle çš„ Gmail â†’ Telegram é€šçŸ¥
    - match: { path: "gmail" }
      action: "agent"
      agentId: "user1"
      wakeMode: "now"
      name: "Gmail"
      sessionKey: "hook:gmail:{{messages[0].id}}"
      messageTemplate: |
        ğŸ“§ æ–°é‚®ä»¶
        å‘ä»¶äºº: {{messages[0].from}}
        ä¸»é¢˜: {{messages[0].subject}}
        ---
        {{messages[0].snippet}}
      deliver: true
      channel: "telegram"
      to: "6309937609" # Kyle çš„ TG ID
